from flask import request
from flask_restplus import Resource
from flask_restplus import fields
from restplus import api

ns = api.namespace('authorization')

authorization_input_fields = api.model('resource' , {
        'externalId': fields.String,
        'externalKey': fields.String,
})


@ns.route('/')
class Authorization(Resource):
    @api.marshal_with(authorization_input_fields)
    def get(self):
        return {
		"name":"asd"
		}

    @api.expect(authorization_input_fields)
    def post(self):
        data = request.json
	thing=data.get('externalId')	print(data)
	thingId="err"
	if data.externalId == "true":
		thingId = "ok"
        return {
		"channel_pub_id":"channel",
		"channel_sub_id":"channel",
		"thing_id": thingId,
		"thing_key": "key",
		"app_key": "app"
		}
