import paho.mqtt.client as mqtt

class Thing:
    def __init__(self,external_id, external_key, url):
        #TODO dodać wysyłanie rządania z pobieraniem pełnej konfiguracji
        self.id = "3a9ece9d-df22-426d-b0a6-6c6fb6ead87e"
        self.key = "a3ce6a97-f91c-442b-9776-e58a43dd09c5"
        self.channel_id = "2aed73b7-949c-4293-a2b2-d79d5019a1dd"

thing = Thing(1,1,"url")
broker_address = "165.22.121.233"

client = mqtt.Client()
client.username_pw_set(thing.id ,thing.key)
client.connect(broker_address)
client.publish(topic = "channels/" + thing.channel_id + "/messages" , payload='[{"name":"attack_name","data":"3100"}]')
